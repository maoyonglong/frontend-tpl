!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@babel/runtime/helpers/classCallCheck"),require("@babel/runtime/helpers/createClass")):"function"==typeof define&&define.amd?define(["@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):(t=t||self).Tpl=e(t._classCallCheck,t._createClass)}(this,function(e,i){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,i=i&&i.hasOwnProperty("default")?i.default:i;var d=0,b=1,y=2,S=3,x=4,E=5,m=6,C=7,G=8,L=9,k=10,q=11,Q=12,T=13,v=14,A=15,D=16,H=17,O=18,P={single:["input","img","br","hr","link"],isSingle:function(t){return 0<=this.single.indexOf(t)},isDouble:function(t){return this.single.indexOf(t)<0}},_={isLetter:function(t){return/[a-zA-Z]/.test(t)},isLg:function(t){return"<"===t},isGt:function(t){return">"===t},isExclamatory:function(t){return"!"===t},isHyphen:function(t){return"-"===t},isSlash:function(t){return"/"===t},isSpace:function(t){return" "===t},isEqual:function(t){return"="===t},isSingleQuote:function(t){return"'"===t},isDoubleQuote:function(t){return'"'===t},isQuote:function(t){return this.isSingleQuote(t)||this.isDoubleQuote(t)}};function n(){this.p=0,this.len=0}return n.prototype.parse=function t(e){var i,n=0===this.p,s=d,r=[],c="",o="",a="",u="",h="",l="",f="",g="";for(this.len=e.length;this.p<this.len;){var w=e.charAt(this.p);switch(s){case d:i={},r.push(i),_.isLg(w)?(s=b,g=w):(s=k,i.type="text",u=w),this.p++;continue;case b:if(_.isExclamatory(w))s=A;else if(_.isLetter(w))s=y,i.type="tag",c=w;else{if(!_.isSpace(w)){if(n)throw new Error("The tag name is illegal in ".concat(this.p,"."));return this.p--,r.pop(),r}s=k,i.type="text",u=g+w,g=""}this.p++;continue;case y:if(_.isLetter(w))c+=w;else if(_.isSpace(w))s=S,i.attrs={},i.tag=c;else{if(!_.isGt(w))throw new Error("The tag name is illegal in ".concat(this.p,"."));s=E,i.attrs={},i.tag=c}this.p++;continue;case S:_.isSlash(w)||_.isSpace(w)||(s=q,o=w),_.isSlash(w)&&(s=x,g=w),_.isGt(w)&&(s=E),this.p++;continue;case x:_.isGt(w)&&(s=E),this.p++;continue;case E:if(P.isSingle(c)){s=d,c="";continue}if(_.isSlash(g))throw new Error("The ".concat(c," is not a single tag."));_.isLg(w)?(s=m,this.p++):i.children=t.call(this,e);continue;case m:g="",_.isSlash(w)?s=G:(this.p--,i.children=t.call(this,e)),this.p++;continue;case G:if(_.isSpace(w)||_.isGt(w)||_.isSlash(w))throw new Error("A letter is expected in ".concat(this.p," but got ").concat(w,"."));s=C,g+=w,this.p++;continue;case C:if(_.isSlash(w))throw new Error("A letter is expected in ".concat(this.p," but got ").concat(w,"."));_.isGt(w)?s=L:g+=w,this.p++;continue;case L:if(c!==g)throw new Error("The tag name is not similar in ".concat(this.p-1));if(!P.isDouble(c))throw new Error("The ".concat(c," is not a double tag in ").concat(this.p-1));c="",s=d;continue;case k:_.isLg(w)?(i.text=u,u="",s=d):(u+=w,this.p++);continue;case q:_.isSpace(w)?s=Q:_.isEqual(w)?s=T:o+=w,this.p++;continue;case Q:_.isSpace(w)||_.isEqual(w)||(s=q),_.isEqual(w)&&(s=T),this.p++;continue;case T:_.isQuote(w)&&(s=v,l=w),this.p++;continue;case v:w!==l?a+=w:(s=S,i.attrs[o]=a,a=""),this.p++;continue;case A:if(!_.isHyphen(w))throw new Error("'-' is expected in ".concat(this.p," but got ").concat(w,"."));i.type="note",s=D,f="left",this.p++;continue;case D:if(_.isHyphen(w));else if(_.isGt(w))s=O,g=w;else{if("left"!==f)throw new Error("'-' or '>' is expected in ".concat(p," but got ").concat(w,"."));s=H,h+=w}this.p++;continue;case H:if(_.isHyphen(w))s=D,f="right";else{if(_.isGt(w))throw new Error("'-' is expected in ".concat(this.p," but got ").concat(w,"."));h+=w}this.p++;continue;case O:i.text=h,f=h="",s=d;continue}}return u&&(i.text=u),h&&(i.note=h),this.p=0,r},function(){function t(){e(this,t)}return i(t,[{key:"parse",value:function(t){return(new n).parse(t)}},{key:"render",value:function(){}}]),t}()});
